<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>專業版互動式化學元素週期表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }

        .periodic-container {
            padding: 20px;
            min-width: 1280px;
        }

        .periodic-grid {
            display: grid;
            grid-template-columns: repeat(18, minmax(0, 1fr));
            gap: 4px;
        }

        /* 底部 F 區塊：2列 x 15欄 */
        .f-block-grid {
            display: grid;
            grid-template-columns: repeat(15, minmax(0, 1fr));
            gap: 4px;
        }

        .element-card {
            aspect-ratio: 1 / 1;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .element-card:hover {
            transform: scale(1.3);
            z-index: 50;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.8);
        }

        /* 元素分類配色 */
        .nonmetal { background-color: #059669; }       /* 綠色 */
        .noble-gas { background-color: #7c3aed; }      /* 紫色 */
        .alkali-metal { background-color: #dc2626; }   /* 紅色 */
        .alkaline-earth { background-color: #ea580c; } /* 橙色 */
        .metalloid { background-color: #0891b2; }      /* 青色 */
        .halogen { background-color: #ca8a04; }        /* 黃色 */
        .post-transition { background-color: #0d9488; }/* 藍綠 */
        .transition-metal { background-color: #2563eb; }/* 藍色 */
        .lanthanide { background-color: #db2777; }     /* 粉紅 */
        .actinide { background-color: #e11d48; }       /* 玫瑰紅 */

        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: #64748b;
        }

        .property-label {
            color: #94a3b8;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="text-center mb-8">
        <h1 class="text-4xl font-bold mb-3 tracking-wide">互動式化學元素週期表</h1>
        <p class="text-slate-400">點擊元素查看詳細物理、化學性質與維基百科資料</p>
    </header>

    <div class="overflow-x-auto">
        <div class="periodic-container max-w-[1400px] mx-auto">
            <!-- 主表 -->
            <div id="main-table" class="periodic-grid mb-8"></div>
            
            <!-- 分隔與標籤 -->
            <div class="flex items-center gap-4 mb-4 pl-[16.6%] opacity-40">
                <div class="h-[1px] w-12 bg-slate-500"></div>
                <span class="text-xs tracking-widest uppercase">鑭系與錒系 (F-Block)</span>
                <div class="h-[1px] flex-grow bg-slate-500"></div>
            </div>

            <!-- 下方 F 區塊 -->
            <div class="flex justify-center">
                <div id="f-block-table" class="f-block-grid w-[83.33%]"></div>
            </div>
        </div>
    </div>

    <!-- 彈窗 Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal()"></div>
        <div class="bg-slate-900 w-full max-w-5xl rounded-2xl shadow-2xl relative overflow-hidden flex flex-col md:flex-row max-h-[95vh] border border-slate-700">
            
            <button onclick="closeModal()" class="absolute top-4 right-4 text-white/70 hover:text-white z-20 bg-slate-800 p-2 rounded-full hover:bg-slate-700 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <!-- 左側：視覺與基礎資訊 -->
            <div id="modal-side" class="w-full md:w-2/5 p-8 flex flex-col relative text-white transition-colors duration-500">
                <div class="absolute inset-0 bg-gradient-to-b from-black/10 to-black/60 z-0"></div>
                
                <div class="relative z-10 flex flex-col items-center text-center h-full">
                    <div class="flex justify-between w-full opacity-60 font-mono text-lg font-bold">
                        <span id="m-number"></span>
                        <span id="m-weight"></span>
                    </div>
                    
                    <div class="flex-grow flex flex-col justify-center">
                        <span id="m-symbol" class="text-9xl font-bold mb-2 drop-shadow-lg"></span>
                        <h2 id="m-name-zh" class="text-5xl font-bold mb-1"></h2>
                        <p id="m-name-en" class="text-xl opacity-80 uppercase tracking-widest font-light"></p>
                    </div>

                    <div class="w-full mt-6">
                        <div class="bg-black/30 rounded-lg p-3 backdrop-blur-sm border border-white/10">
                            <p class="text-xs uppercase text-white/50 mb-1">電子組態</p>
                            <p id="m-electron" class="font-mono text-xl text-yellow-300"></p>
                        </div>
                    </div>
                    
                    <!-- 維基百科按鈕 -->
                    <a id="m-wiki-link" href="#" target="_blank" class="mt-6 flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full transition-all font-bold backdrop-blur-md border border-white/20 group">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png" class="w-6 h-6 grayscale group-hover:grayscale-0 transition-all" alt="Wiki">
                        維基百科詳細資料
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                    </a>
                </div>
            </div>

            <!-- 右側：詳細數據 -->
            <div class="w-full md:w-3/5 bg-slate-900 overflow-y-auto custom-scrollbar flex flex-col">
                <!-- 圖片區 -->
                <div class="h-64 relative overflow-hidden group">
                    <img id="m-image" src="" alt="元素照片" class="object-cover w-full h-full transition-transform duration-1000 group-hover:scale-105 opacity-80 group-hover:opacity-100">
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
                    <div class="absolute bottom-2 right-4 text-[10px] text-slate-400 italic">圖片來源: Wikimedia Commons</div>
                </div>

                <div class="p-8 space-y-8">
                    <!-- 物理性質 -->
                    <section>
                        <h3 class="flex items-center text-emerald-400 font-bold text-lg mb-4 border-b border-emerald-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                            物理性質
                        </h3>
                        <div class="grid grid-cols-2 gap-y-4 gap-x-8 text-sm text-slate-300">
                            <div>
                                <div class="property-label">常溫狀態</div>
                                <div id="m-phys-state" class="font-medium text-white"></div>
                            </div>
                            <div>
                                <div class="property-label">自然存在 / 放射性</div>
                                <div id="m-phys-nature" class="font-medium text-white"></div>
                            </div>
                            <div>
                                <div class="property-label">熔點 (Melting Point)</div>
                                <div id="m-phys-mp" class="font-medium text-white font-mono"></div>
                            </div>
                            <div>
                                <div class="property-label">沸點 (Boiling Point)</div>
                                <div id="m-phys-bp" class="font-medium text-white font-mono"></div>
                            </div>
                        </div>
                    </section>

                    <!-- 化學性質 -->
                    <section>
                        <h3 class="flex items-center text-rose-400 font-bold text-lg mb-4 border-b border-rose-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            化學性質
                        </h3>
                        <div class="space-y-4 text-sm text-slate-300">
                            <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                <div class="property-label text-rose-300/70">常見化學反應</div>
                                <div id="m-chem-reaction" class="leading-relaxed"></div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                    <div class="property-label text-rose-300/70">與水反應性</div>
                                    <div id="m-chem-water"></div>
                                </div>
                                <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                    <div class="property-label text-rose-300/70">氧化物性質 (溶解/酸鹼)</div>
                                    <div id="m-chem-oxide"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- 應用 -->
                    <section>
                        <h3 class="flex items-center text-blue-400 font-bold text-lg mb-4 border-b border-blue-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                            應用簡述
                        </h3>
                        <p id="m-apps" class="text-slate-300 leading-relaxed"></p>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 資料庫邏輯 ---
        
        const symbols = ["","H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"];
        const namesZh = ["","氫","氦","鋰","鈹","硼","碳","氮","氧","氟","氖","鈉","鎂","鋁","矽","磷","硫","氯","氬","鉀","鈣","鈧","鈦","釩","鉻","錳","鐵","鈷","鎳","銅","鋅","鎵","鍺","砷","硒","溴","氪","銣","鍶","釔","鋯","鈮","鉬","鎝","釕","銠","鈀","銀","鎘","銦","錫","銻","碲","碘","氙","銫","鋇","鑭","鈰","鐠","釹","鉕","釤","銪","釓","鋱","鏑","鈥","鉺","銩","鐿","鑥","鉿","鉭","鎢","錸","鋨","銥","鉑","金","汞","鉈","鉛","鉍","釙","砈","氡","鍅","鐳","錒","釷","鏷","鈾","錼","鈽","鋂","鋦","鉳","鉲","鑀","鐨","鍆","鍩","鐒","鑪","𨧀","𨭎","𨨏","𨭆","䥑","鐽","錀","鎶","鉨","鈇","鏌","鉝","鿬","鿫"];
        const configs = ["","1s¹","1s²","[He] 2s¹","[He] 2s²","[He] 2s² 2p¹","[He] 2s² 2p²","[He] 2s² 2p³","[He] 2s² 2p⁴","[He] 2s² 2p⁵","[He] 2s² 2p⁶","[Ne] 3s¹","[Ne] 3s²","[Ne] 3s² 3p¹","[Ne] 3s² 3p²","[Ne] 3s² 3p³","[Ne] 3s² 3p⁴","[Ne] 3s² 3p⁵","[Ne] 3s² 3p⁶","[Ar] 4s¹","[Ar] 4s²","[Ar] 3d¹ 4s²","[Ar] 3d² 4s²","[Ar] 3d³ 4s²","[Ar] 3d⁵ 4s¹","[Ar] 3d⁵ 4s²","[Ar] 3d⁶ 4s²","[Ar] 3d⁷ 4s²","[Ar] 3d⁸ 4s²","[Ar] 3d¹⁰ 4s¹","[Ar] 3d¹⁰ 4s²","[Ar] 3d¹⁰ 4s² 4p¹","[Ar] 3d¹⁰ 4s² 4p²","[Ar] 3d¹⁰ 4s² 4p³","[Ar] 3d¹⁰ 4s² 4p⁴","[Ar] 3d¹⁰ 4s² 4p⁵","[Ar] 3d¹⁰ 4s² 4p⁶","[Kr] 5s¹","[Kr] 5s²","[Kr] 4d¹ 5s²","[Kr] 4d² 5s²","[Kr] 4d⁴ 5s¹","[Kr] 4d⁵ 5s¹","[Kr] 4d⁵ 5s²","[Kr] 4d⁷ 5s¹","[Kr] 4d⁸ 5s¹","[Kr] 4d¹⁰","[Kr] 4d¹⁰ 5s¹","[Kr] 4d¹⁰ 5s²","[Kr] 4d¹⁰ 5s² 5p¹","[Kr] 4d¹⁰ 5s² 5p²","[Kr] 4d¹⁰ 5s² 5p³","[Kr] 4d¹⁰ 5s² 5p⁴","[Kr] 4d¹⁰ 5s² 5p⁵","[Kr] 4d¹⁰ 5s² 5p⁶","[Xe] 6s¹","[Xe] 6s²","[Xe] 5d¹ 6s²","[Xe] 4f¹ 5d¹ 6s²","[Xe] 4f³ 6s²","[Xe] 4f⁴ 6s²","[Xe] 4f⁵ 6s²","[Xe] 4f⁶ 6s²","[Xe] 4f⁷ 6s²","[Xe] 4f⁷ 5d¹ 6s²","[Xe] 4f⁹ 6s²","[Xe] 4f¹⁰ 6s²","[Xe] 4f¹¹ 6s²","[Xe] 4f¹² 6s²","[Xe] 4f¹³ 6s²","[Xe] 4f¹⁴ 6s²","[Xe] 4f¹⁴ 5d¹ 6s²","[Xe] 4f¹⁴ 5d² 6s²","[Xe] 4f¹⁴ 5d³ 6s²","[Xe] 4f¹⁴ 5d⁴ 6s²","[Xe] 4f¹⁴ 5d⁵ 6s²","[Xe] 4f¹⁴ 5d⁶ 6s²","[Xe] 4f¹⁴ 5d⁷ 6s²","[Xe] 4f¹⁴ 5d⁹ 6s¹","[Xe] 4f¹⁴ 5d¹⁰ 6s¹","[Xe] 4f¹⁴ 5d¹⁰ 6s²","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p¹","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p²","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p³","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁴","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁵","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁶","[Rn] 7s¹","[Rn] 7s²","[Rn] 6d¹ 7s²","[Rn] 6d² 7s²","[Rn] 5f² 6d¹ 7s²","[Rn] 5f³ 6d¹ 7s²","[Rn] 5f⁴ 6d¹ 7s²","[Rn] 5f⁶ 7s²","[Rn] 5f⁷ 7s²","[Rn] 5f⁷ 6d¹ 7s²","[Rn] 5f⁹ 7s²","[Rn] 5f¹⁰ 7s²","[Rn] 5f¹¹ 7s²","[Rn] 5f¹² 7s²","[Rn] 5f¹³ 7s²","[Rn] 5f¹⁴ 7s²","[Rn] 5f¹⁴ 6d¹ 7s²","[Rn] 5f¹⁴ 6d² 7s²","[Rn] 5f¹⁴ 6d³ 7s²","[Rn] 5f¹⁴ 6d⁴ 7s²","[Rn] 5f¹⁴ 6d⁵ 7s²","[Rn] 5f¹⁴ 6d⁶ 7s²","[Rn] 5f¹⁴ 6d⁷ 7s²","[Rn] 5f¹⁴ 6d⁸ 7s²","[Rn] 5f¹⁴ 6d¹⁰ 7s¹","[Rn] 5f¹⁴ 6d¹⁰ 7s²","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p¹","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p²","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p³","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁴","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁵","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁶"];
        const weights = ["","1.008","4.0026","6.94","9.0122","10.81","12.011","14.007","15.999","18.998","20.180","22.990","24.305","26.982","28.085","30.974","32.06","35.45","39.948","39.098","40.078","44.956","47.867","50.942","51.996","54.938","55.845","58.933","58.693","63.546","65.38","69.723","72.63","74.922","78.96","79.904","83.798","85.468","87.62","88.906","91.224","92.906","95.95","(98)","101.07","102.91","106.42","107.87","112.41","114.82","118.71","121.76","127.60","126.90","131.29","132.91","137.33","138.91","140.12","140.91","144.24","(145)","150.36","151.96","157.25","158.93","162.50","164.93","167.26","168.93","173.05","174.97","178.49","180.95","183.84","186.21","190.23","192.22","195.08","196.97","200.59","204.38","207.2","208.98","(209)","(210)","(222)","(223)","(226)","(227)","232.04","231.04","238.03","(237)","(244)","(243)","(247)","(247)","(251)","(252)","(257)","(258)","(259)","(262)","(267)","(268)","(271)","(272)","(270)","(276)","(281)","(280)","(285)","(284)","(289)","(288)","(293)","(294)","(294)"];

        // 詳盡的維基百科圖片對應表 (Wikimedia Commons Filename)
        const wikiImageMap = {
            1: "Hydrogen_discharge_tube.jpg",
            2: "Helium_discharge_tube.jpg",
            3: "Lithium (Element - 3) 2.jpg",
            4: "Beryllium nuggets 2.jpg",
            5: "Boron (B).jpg",
            6: "Diamond-and-graphite-with-scale.jpg",
            7: "Fluessiger Stickstoff.jpg",
            8: "Liquid_oxygen_in_a_beaker_4.jpg",
            9: "Liquid fluorine tighter crop.jpg",
            10: "Neon_discharge_tube.jpg",
            11: "NNa (Sodium).jpg",
            12: "Magnesium_crystals.jpg",
            13: "Aluminium-4.jpg",
            14: "SiliconCroda.jpg",
            15: "Phosphor.JPG",
            16: "Sulfur-sample.jpg",
            17: "Chlorine in bottle.jpg",
            18: "Argon_discharge_tube.jpg",
            19: "Potassium.jpg",
            20: "Calcium_1.jpg",
            21: "Scandium, Sc.jpg",
            22: "Titanium crystal-bars.jpg",
            23: "Vanadium crystal bar and 1cm3 cube.jpg",
            24: "Chromium_crystals_and_1cm3_cube.jpg",
            25: "Manganese_electrolytic_and_1cm3_cube.jpg",
            26: "Iron_electrolytic_and_1cm3_cube.jpg",
            27: "Kobalt electrolytic and 1cm3 cube.jpg",
            28: "Nickel electrolytic and 1cm3 cube.jpg",
            29: "Continuously Transposed Conductor Cu (Copper CTC) 3.jpg",
            30: "Zinc_fragment_sublimed_and_1cm3_cube.jpg",
            31: "Gallium crystals.jpg",
            32: "Germanium_polycrystalline-2.jpg",
            33: "Arsenic_1.jpg",
            34: "Selenium_black.jpg",
            35: "Bromine_vial_in_acrylic_cube.jpg",
            36: "Krypton_discharge_tube.jpg",
            37: "Rubidium_metal.jpg",
            38: "Strontium_destilled_crystals.jpg",
            39: "Yttrium_sublimed_dendritic_and_1cm3_cube.jpg",
            40: "Zirconium_crystal_bar_and_1cm3_cube.jpg",
            41: "Niobium_crystals_and_1cm3_cube.jpg",
            42: "Molybdenum_crystalline_fragment_and_1cm3_cube.jpg",
            43: "Technetium-sample-cropped.jpg",
            44: "Ruthenium_pellet_and_1cm3_cube.jpg",
            45: "Rhodium_powder_pressed_melted.jpg",
            46: "Palladium_1.jpg",
            47: "Silver_crystal.jpg",
            48: "Cadmium_crystal_bar.jpg",
            49: "Indium_1.jpg",
            50: "Beta-tin-sample.jpg",
            51: "Antimony-4.jpg",
            52: "Tellurium_crystal.jpg",
            53: "Iodine_sample.jpg",
            54: "Xenon_discharge_tube.jpg",
            55: "Cesium_metal.jpg",
            56: "Barium_under_argon_atmosphere_mostly_oxidized.jpg",
            57: "Lanthanum-2.jpg",
            58: "Cerium_2.jpg",
            59: "Praseodymium.jpg",
            60: "Neodymium_2.jpg",
            61: "Promethium-147-paint.jpg",
            62: "Samarium-2.jpg",
            63: "Europium.jpg",
            64: "Gadolinium-2.jpg",
            65: "Terbium-2.jpg",
            66: "Dysprosium-2.jpg",
            67: "Holmium2.jpg",
            68: "Erbium-2.jpg",
            69: "Thulium-sublimed-dendritic-piece.jpg",
            70: "Ytterbium-3.jpg",
            71: "Lutetium_sublimed_dendritic_and_1cm3_cube.jpg",
            72: "Hafnium_single_crystal_bar_and_1cm3_cube.jpg",
            73: "Tantalum_single_crystal_and_1cm3_cube.jpg",
            74: "Tungsten_1.jpg",
            75: "Rhenium_single_crystal_bar_and_1cm3_cube.jpg",
            76: "Osmium_crystals.jpg",
            77: "Iridium-2.jpg",
            78: "Platinum_crystals.jpg",
            79: "Gold_nugget_3.jpg",
            80: "Pouring_liquid_mercury_bionerd.jpg",
            81: "Thallium_pieces_in_ampoule.jpg",
            82: "Lead_electrolytic_and_1cm3_cube.jpg",
            83: "Bismuth_crystals_and_1cm3_cube.jpg",
            84: "Polonium210.jpg", // Often historical
            85: "Astatine.jpg", // Theoretical/Artistic usually
            86: "Radon_discharge_tube.jpg",
            87: "Francium_outline.png",
            88: "Radium226.jpg",
            89: "Actinium_sample.jpg",
            90: "Thorium_crystal.jpg",
            91: "Protactinium-231.jpg",
            92: "Uranium238.jpg",
            93: "Neptunium-237_oxide.jpg",
            94: "Plutonium_ring.jpg",
            95: "Americium_microscope.jpg",
            96: "Curium-244.jpg",
            97: "",
            98: "",
            99: "",
            100: "",
            101: "",
            102: "",
            103: "",
            104: "",
            105: "",
            106: "",
            107: "",
            108: "",
            109: "",
            110: "",
            111: "",
            112: "",
            113: "",
            114: "",
            115: "",
            116: "",
            117: "",
            118: ""
            // >96 usually uses generic or specific small samples, fallback works fine
        };

        // 詳細數據覆蓋
        const detailedData = {
            1: { state: "氣體", nature: "自然存在", radio: "否 (T除外)", mp: "-259.16°C", bp: "-252.87°C", rxn: "與氧氣燃燒生成水，與非金屬反應。", water: "不反應", oxide: "水(中性)" },
            2: { state: "氣體", nature: "自然存在", radio: "否", mp: "-272.20°C", bp: "-268.93°C", rxn: "惰性，極難反應。", water: "不反應", oxide: "無" },
            3: { state: "固體", nature: "自然存在", radio: "否", mp: "180.54°C", bp: "1342°C", rxn: "在空氣中氧化變黑，與酸反應。", water: "反應劇烈，生成氫氣與氫氧化鋰", oxide: "溶於水 (強鹼性)" },
            6: { state: "固體", nature: "自然存在", radio: "否 (C14除外)", mp: "3550°C (鑽石)", bp: "4827°C", rxn: "可燃，高溫下還原金屬氧化物。", water: "不反應", oxide: "微溶/反應生成碳酸 (酸性)" },
            8: { state: "氣體", nature: "自然存在", radio: "否", mp: "-218.79°C", bp: "-182.96°C", rxn: "強氧化劑，支持燃燒。", water: "微溶", oxide: "自身為氧化劑" },
            9: { state: "氣體", nature: "自然存在", radio: "否", mp: "-219.67°C", bp: "-188.11°C", rxn: "極度活潑，腐蝕性強。", water: "劇烈反應生成HF與氧氣", oxide: "OF2 (特殊)" },
            11: { state: "固體", nature: "自然存在", radio: "否", mp: "97.72°C", bp: "883°C", rxn: "空氣中迅速氧化，燃燒呈黃色火焰。", water: "劇烈反應，甚至爆炸", oxide: "溶於水 (強鹼性)" },
            26: { state: "固體", nature: "自然存在", radio: "否", mp: "1538°C", bp: "2862°C", rxn: "潮濕空氣中生鏽，溶於稀酸。", water: "紅熱時與水蒸氣反應", oxide: "不溶 (鹼性/兩性)" },
            79: { state: "固體", nature: "自然存在", radio: "否", mp: "1064.18°C", bp: "2970°C", rxn: "極穩定，僅溶於王水與氰化物溶液。", water: "不反應", oxide: "不溶" },
            80: { state: "液體", nature: "自然存在", radio: "否", mp: "-38.83°C", bp: "356.73°C", rxn: "與硫粉研磨可反應。", water: "不反應", oxide: "不溶 (弱鹼性)" },
            92: { state: "固體", nature: "自然存在", radio: "是 (強)", mp: "1132.2°C", bp: "4131°C", rxn: "粉末易自燃，與氟反應生成UF6。", water: "緩慢反應", oxide: "兩性 (複雜)" }
        };

        function generateProperties(n, cat, group) {
            if (detailedData[n]) return detailedData[n];

            let props = {
                state: "固體",
                nature: n > 94 ? "人造元素" : "自然存在",
                radio: (n >= 84 || n===43 || n===61) ? "是" : "否",
                mp: "待查閱數據庫",
                bp: "待查閱數據庫",
                rxn: "依據其電子組態具有特定的化學活性。",
                water: "不反應或反應極慢",
                oxide: "不溶或微溶"
            };

            if (n === 35 || n === 80) props.state = "液體";
            if ([1,2,7,8,9,10,17,18,36,54,86,118].includes(n)) props.state = "氣體";

            if (cat === "alkali-metal") {
                props.rxn = "極易氧化，需保存在油中。";
                props.water = "劇烈反應，生成氫氣與強鹼。";
                props.oxide = "溶於水 (強鹼性)";
                props.mp = "相對較低 (<200°C)";
            } else if (cat === "alkaline-earth") {
                props.rxn = "易氧化，燃燒發出耀眼光芒。";
                props.water = "反應 (鎂需熱水，鈣鍶鋇冷水可反應)。";
                props.oxide = "與水反應生成鹼 (鹼性)";
            } else if (cat === "halogen") {
                props.rxn = "強氧化劑，與金屬反應生成鹽。";
                props.water = "歧化反應 (生成酸)。";
                props.oxide = "溶於水 (酸性)";
            } else if (cat === "noble-gas") {
                props.rxn = "極不活潑，僅在特殊條件下與氟反應(Xe, Kr)。";
                props.water = "微溶 (物理溶解)";
                props.oxide = "無穩定氧化物";
                props.mp = "極低";
            } else if (cat === "transition-metal") {
                props.rxn = "多具變價性，可形成配合物。";
                props.water = "大多不反應 (高溫下與水蒸氣反應)。";
                props.oxide = "大多不溶 (鹼性或兩性)";
                props.mp = "高";
            } else if (n >= 95) {
                props.rxn = "具有高度放射性，化學性質研究較少。";
                props.water = "輻射分解水。";
                props.mp = "-";
            }

            return props;
        }

        function initTable() {
            const mainTable = document.getElementById('main-table');
            const fTable = document.getElementById('f-block-table');
            
            const elements = [];
            for(let i=1; i<=118; i++) {
                let cat = "transition-metal";
                if ([1,6,7,8,15,16,34].includes(i)) cat="nonmetal";
                if ([2,10,18,36,54,86,118].includes(i)) cat="noble-gas";
                if ([3,11,19,37,55,87].includes(i)) cat="alkali-metal";
                if ([4,12,20,38,56,88].includes(i)) cat="alkaline-earth";
                if ([5,14,32,33,51,52,85].includes(i)) cat="metalloid";
                if ([9,17,35,53,117].includes(i)) cat="halogen";
                if ([13,31,49,50,81,82,83,84,113,114,115,116].includes(i)) cat="post-transition";
                if (i >= 57 && i <= 71) cat="lanthanide";
                if (i >= 89 && i <= 103) cat="actinide";

                // 優先使用維基百科對應表，若無則使用通用格式 (可能在維基上存在，也可能無)
                let imgName = wikiImageMap[i] || `${symbols[i]}_element.jpg`;

                const props = generateProperties(i, cat);

                elements.push({
                    n: i,
                    s: symbols[i],
                    zh: namesZh[i],
                    en: symbols[i], 
                    w: weights[i],
                    cat: cat,
                    conf: configs[i],
                    img: imgName,
                    ...props,
                    apps: "廣泛應用於工業、科學研究及特定技術領域。"
                });
            }

            const renderCell = (el, container) => {
                const cell = document.createElement('div');
                cell.className = `element-card ${el.cat}`;
                cell.innerHTML = `
                    <span class="absolute top-1 left-2 opacity-50 text-[10px] font-mono">${el.n}</span>
                    <span class="text-xl font-bold mt-1">${el.s}</span>
                    <span class="text-[10px] font-medium opacity-90">${el.zh}</span>
                `;
                cell.onclick = () => showElement(el);
                container.appendChild(cell);
            };

            for (let r = 1; r <= 7; r++) {
                for (let c = 1; c <= 18; c++) {
                    let n = null;
                    if(r==1 && c==1) n=1;
                    else if(r==1 && c==18) n=2;
                    else if(r==2 && c<=2) n=2+c;
                    else if(r==2 && c>=13) n=4+c-12; 
                    else if(r==3 && c<=2) n=10+c;
                    else if(r==3 && c>=13) n=12+c-12; 
                    else if(r==4) n=18+c;
                    else if(r==5) n=36+c;
                    else if(r==6) { if(c<=2) n=54+c; else if(c>=4) n=71+c-3; } 
                    else if(r==7) { if(c<=2) n=86+c; else if(c>=4) n=103+c-3; } 

                    const cell = document.createElement('div');
                    
                    if (n) {
                        const el = elements[n-1];
                        cell.className = `element-card ${el.cat}`;
                        cell.innerHTML = `
                            <span class="absolute top-1 left-2 opacity-50 text-[10px] font-mono">${el.n}</span>
                            <span class="text-xl font-bold mt-1">${el.s}</span>
                            <span class="text-[10px] font-medium opacity-90">${el.zh}</span>
                        `;
                        cell.onclick = () => showElement(el);
                    } else {
                        if(r==6 && c==3) {
                            cell.className = "element-card lanthanide opacity-30 cursor-default hover:transform-none hover:shadow-none";
                            cell.innerHTML = "<span class='text-[9px]'>57-71</span>";
                        } else if(r==7 && c==3) {
                            cell.className = "element-card actinide opacity-30 cursor-default hover:transform-none hover:shadow-none";
                            cell.innerHTML = "<span class='text-[9px]'>89-103</span>";
                        } else {
                            cell.style.visibility = "hidden";
                        }
                    }
                    mainTable.appendChild(cell);
                }
            }

            const fElements = elements.filter(e => (e.n>=57 && e.n<=71) || (e.n>=89 && e.n<=103));
            fElements.forEach(el => renderCell(el, fTable));
        }

        function showElement(el) {
            document.getElementById('m-number').innerText = el.n;
            document.getElementById('m-weight').innerText = el.w;
            document.getElementById('m-symbol').innerText = el.s;
            document.getElementById('m-name-zh').innerText = el.zh;
            document.getElementById('m-name-en').innerText = el.en || el.s; 
            document.getElementById('m-electron').innerText = el.conf;
            
            const imgEl = document.getElementById('m-image');
            imgEl.src = `https://commons.wikimedia.org/wiki/Special:FilePath/${el.img}?width=800`;
            // 失敗時使用 Placehold.co 顯示元素符號
            imgEl.onerror = function() { this.src = `https://placehold.co/800x400/1e293b/white?text=${el.s}`; };

            const wikiUrl = `https://zh.wikipedia.org/wiki/${el.zh}`;
            document.getElementById('m-wiki-link').href = wikiUrl;

            document.getElementById('m-phys-state').innerText = el.state;
            document.getElementById('m-phys-nature').innerText = `${el.nature} ${el.radio === "是" ? "(具放射性)" : ""}`;
            document.getElementById('m-phys-mp').innerText = el.mp;
            document.getElementById('m-phys-bp').innerText = el.bp;

            document.getElementById('m-chem-reaction').innerText = el.rxn;
            document.getElementById('m-chem-water').innerText = el.water;
            document.getElementById('m-chem-oxide').innerText = el.oxide;

            document.getElementById('m-apps').innerText = el.apps;
            
            const side = document.getElementById('modal-side');
            side.className = `w-full md:w-2/5 p-8 flex flex-col relative text-white transition-colors duration-500 ${el.cat}`;

            const modal = document.getElementById('modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.remove('opacity-0'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }

        window.onload = initTable;
    </script>
</body>
</html>
