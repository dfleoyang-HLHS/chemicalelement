<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>專業版互動式化學元素週期表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }

        .periodic-container {
            padding: 20px;
            min-width: 1280px;
        }

        .periodic-grid {
            display: grid;
            grid-template-columns: repeat(18, minmax(0, 1fr));
            gap: 4px;
        }

        /* 底部 F 區塊：2列 x 15欄 */
        .f-block-grid {
            display: grid;
            grid-template-columns: repeat(15, minmax(0, 1fr));
            gap: 4px;
        }

        .element-card {
            aspect-ratio: 1 / 1;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .element-card:hover {
            transform: scale(1.3);
            z-index: 50;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.8);
        }

        /* 元素分類配色 */
        .nonmetal { background-color: #059669; }       /* 綠色 */
        .noble-gas { background-color: #7c3aed; }      /* 紫色 */
        .alkali-metal { background-color: #dc2626; }   /* 紅色 */
        .alkaline-earth { background-color: #ea580c; } /* 橙色 */
        .metalloid { background-color: #0891b2; }      /* 青色 */
        .halogen { background-color: #ca8a04; }        /* 黃色 */
        .post-transition { background-color: #0d9488; }/* 藍綠 */
        .transition-metal { background-color: #2563eb; }/* 藍色 */
        .lanthanide { background-color: #db2777; }     /* 粉紅 */
        .actinide { background-color: #e11d48; }       /* 玫瑰紅 */

        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: #64748b;
        }

        .property-label {
            color: #94a3b8;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="text-center mb-8">
        <h1 class="text-4xl font-bold mb-3 tracking-wide">互動式化學元素週期表</h1>
        <p class="text-slate-400">點擊元素查看詳細物理、化學性質與維基百科資料</p>
    </header>

    <div class="overflow-x-auto">
        <div class="periodic-container max-w-[1400px] mx-auto">
            <!-- 主表 -->
            <div id="main-table" class="periodic-grid mb-8"></div>
            
            <!-- 分隔與標籤 -->
            <div class="flex items-center gap-4 mb-4 pl-[16.6%] opacity-40">
                <div class="h-[1px] w-12 bg-slate-500"></div>
                <span class="text-xs tracking-widest uppercase">鑭系與錒系 (F-Block)</span>
                <div class="h-[1px] flex-grow bg-slate-500"></div>
            </div>

            <!-- 下方 F 區塊 -->
            <div class="flex justify-center">
                <div id="f-block-table" class="f-block-grid w-[83.33%]"></div>
            </div>
        </div>
    </div>

    <!-- 彈窗 Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal()"></div>
        <div class="bg-slate-900 w-full max-w-5xl rounded-2xl shadow-2xl relative overflow-hidden flex flex-col md:flex-row max-h-[95vh] border border-slate-700">
            
            <button onclick="closeModal()" class="absolute top-4 right-4 text-white/70 hover:text-white z-20 bg-slate-800 p-2 rounded-full hover:bg-slate-700 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <!-- 左側：視覺與基礎資訊 -->
            <div id="modal-side" class="w-full md:w-2/5 p-8 flex flex-col relative text-white transition-colors duration-500">
                <div class="absolute inset-0 bg-gradient-to-b from-black/10 to-black/60 z-0"></div>
                
                <div class="relative z-10 flex flex-col items-center text-center h-full">
                    <div class="flex justify-between w-full opacity-60 font-mono text-lg font-bold">
                        <span id="m-number"></span>
                        <span id="m-weight"></span>
                    </div>
                    
                    <div class="flex-grow flex flex-col justify-center">
                        <span id="m-symbol" class="text-9xl font-bold mb-2 drop-shadow-lg"></span>
                        <h2 id="m-name-zh" class="text-5xl font-bold mb-1"></h2>
                        <p id="m-name-en" class="text-xl opacity-80 uppercase tracking-widest font-light"></p>
                    </div>

                    <div class="w-full mt-6">
                        <div class="bg-black/30 rounded-lg p-3 backdrop-blur-sm border border-white/10">
                            <p class="text-xs uppercase text-white/50 mb-1">電子組態</p>
                            <p id="m-electron" class="font-mono text-xl text-yellow-300"></p>
                        </div>
                    </div>
                    
                    <!-- 維基百科按鈕 -->
                    <a id="m-wiki-link" href="#" target="_blank" class="mt-6 flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full transition-all font-bold backdrop-blur-md border border-white/20 group">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png" class="w-6 h-6 grayscale group-hover:grayscale-0 transition-all" alt="Wiki">
                        維基百科詳細資料
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                    </a>
                </div>
            </div>

            <!-- 右側：詳細數據 -->
            <div class="w-full md:w-3/5 bg-slate-900 overflow-y-auto custom-scrollbar flex flex-col">
                <!-- 圖片區 -->
                <div class="h-64 relative overflow-hidden group">
                    <img id="m-image" src="" alt="元素照片" class="object-cover w-full h-full transition-transform duration-1000 group-hover:scale-105 opacity-80 group-hover:opacity-100">
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
                    <div class="absolute bottom-2 right-4 text-[10px] text-slate-400 italic">圖片來源: Wikimedia Commons</div>
                </div>

                <div class="p-8 space-y-8">
                    <!-- 物理性質 -->
                    <section>
                        <h3 class="flex items-center text-emerald-400 font-bold text-lg mb-4 border-b border-emerald-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                            物理性質 (Physical Properties)
                        </h3>
                        <div class="grid grid-cols-2 gap-y-4 gap-x-8 text-sm text-slate-300">
                            <div>
                                <div class="property-label">常溫狀態 (STP)</div>
                                <div id="m-phys-state" class="font-medium text-white"></div>
                            </div>
                            <div>
                                <div class="property-label">屬性 / 放射性</div>
                                <div id="m-phys-nature" class="font-medium text-white"></div>
                            </div>
                            <div>
                                <div class="property-label">熔點 (Melting Point)</div>
                                <div id="m-phys-mp" class="font-medium text-white font-mono"></div>
                            </div>
                            <div>
                                <div class="property-label">沸點 (Boiling Point)</div>
                                <div id="m-phys-bp" class="font-medium text-white font-mono"></div>
                            </div>
                        </div>
                    </section>

                    <!-- 化學性質 -->
                    <section>
                        <h3 class="flex items-center text-rose-400 font-bold text-lg mb-4 border-b border-rose-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            化學性質 (Chemical Properties)
                        </h3>
                        <div class="space-y-4 text-sm text-slate-300">
                            <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                <div class="property-label text-rose-300/70">常見化學反應</div>
                                <div id="m-chem-reaction" class="leading-relaxed"></div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                    <div class="property-label text-rose-300/70">與水反應性</div>
                                    <div id="m-chem-water"></div>
                                </div>
                                <div class="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                    <div class="property-label text-rose-300/70">氧化物性質 (溶解/酸鹼)</div>
                                    <div id="m-chem-oxide"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- 應用 -->
                    <section>
                        <h3 class="flex items-center text-blue-400 font-bold text-lg mb-4 border-b border-blue-400/30 pb-2">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                            應用領域 (Applications)
                        </h3>
                        <p id="m-apps" class="text-slate-300 leading-relaxed"></p>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <script>
        const symbols = ["","H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"];
        const namesZh = ["","氫","氦","鋰","鈹","硼","碳","氮","氧","氟","氖","鈉","鎂","鋁","矽","磷","硫","氯","氬","鉀","鈣","鈧","鈦","釩","鉻","錳","鐵","鈷","鎳","銅","鋅","鎵","鍺","砷","硒","溴","氪","銣","鍶","釔","鋯","鈮","鉬","鎝","釕","銠","鈀","銀","鎘","銦","錫","銻","碲","碘","氙","銫","鋇","鑭","鈰","鐠","釹","鉕","釤","銪","釓","鋱","鏑","鈥","鉺","銩","鐿","鑥","鉿","鉭","鎢","錸","鋨","銥","鉑","金","汞","鉈","鉛","鉍","釙","砈","氡","鍅","鐳","錒","釷","鏷","鈾","錼","鈽","鋂","鋦","鉳","鉲","鑀","鐨","鍆","鍩","鐒","鑪","𨧀","𨭎","𨨏","𨭆","䥑","鐽","錀","鎶","鉨","鈇","鏌","鉝","鿬","鿫"];
        const configs = ["","1s¹","1s²","[He] 2s¹","[He] 2s²","[He] 2s² 2p¹","[He] 2s² 2p²","[He] 2s² 2p³","[He] 2s² 2p⁴","[He] 2s² 2p⁵","[He] 2s² 2p⁶","[Ne] 3s¹","[Ne] 3s²","[Ne] 3s² 3p¹","[Ne] 3s² 3p²","[Ne] 3s² 3p³","[Ne] 3s² 3p⁴","[Ne] 3s² 3p⁵","[Ne] 3s² 3p⁶","[Ar] 4s¹","[Ar] 4s²","[Ar] 3d¹ 4s²","[Ar] 3d² 4s²","[Ar] 3d³ 4s²","[Ar] 3d⁵ 4s¹","[Ar] 3d⁵ 4s²","[Ar] 3d⁶ 4s²","[Ar] 3d⁷ 4s²","[Ar] 3d⁸ 4s²","[Ar] 3d¹⁰ 4s¹","[Ar] 3d¹⁰ 4s²","[Ar] 3d¹⁰ 4s² 4p¹","[Ar] 3d¹⁰ 4s² 4p²","[Ar] 3d¹⁰ 4s² 4p³","[Ar] 3d¹⁰ 4s² 4p⁴","[Ar] 3d¹⁰ 4s² 4p⁵","[Ar] 3d¹⁰ 4s² 4p⁶","[Kr] 5s¹","[Kr] 5s²","[Kr] 4d¹ 5s²","[Kr] 4d² 5s²","[Kr] 4d⁴ 5s¹","[Kr] 4d⁵ 5s¹","[Kr] 4d⁵ 5s²","[Kr] 4d⁷ 5s¹","[Kr] 4d⁸ 5s¹","[Kr] 4d¹⁰","[Kr] 4d¹⁰ 5s¹","[Kr] 4d¹⁰ 5s²","[Kr] 4d¹⁰ 5s² 5p¹","[Kr] 4d¹⁰ 5s² 5p²","[Kr] 4d¹⁰ 5s² 5p³","[Kr] 4d¹⁰ 5s² 5p⁴","[Kr] 4d¹⁰ 5s² 5p⁵","[Kr] 4d¹⁰ 5s² 5p⁶","[Xe] 6s¹","[Xe] 6s²","[Xe] 5d¹ 6s²","[Xe] 4f¹ 5d¹ 6s²","[Xe] 4f³ 6s²","[Xe] 4f⁴ 6s²","[Xe] 4f⁵ 6s²","[Xe] 4f⁶ 6s²","[Xe] 4f⁷ 6s²","[Xe] 4f⁷ 5d¹ 6s²","[Xe] 4f⁹ 6s²","[Xe] 4f¹⁰ 6s²","[Xe] 4f¹¹ 6s²","[Xe] 4f¹² 6s²","[Xe] 4f¹³ 6s²","[Xe] 4f¹⁴ 6s²","[Xe] 4f¹⁴ 5d¹ 6s²","[Xe] 4f¹⁴ 5d² 6s²","[Xe] 4f¹⁴ 5d³ 6s²","[Xe] 4f¹⁴ 5d⁴ 6s²","[Xe] 4f¹⁴ 5d⁵ 6s²","[Xe] 4f¹⁴ 5d⁶ 6s²","[Xe] 4f¹⁴ 5d⁷ 6s²","[Xe] 4f¹⁴ 5d⁹ 6s¹","[Xe] 4f¹⁴ 5d¹⁰ 6s¹","[Xe] 4f¹⁴ 5d¹⁰ 6s²","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p¹","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p²","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p³","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁴","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁵","[Xe] 4f¹⁴ 5d¹⁰ 6s² 6p⁶","[Rn] 7s¹","[Rn] 7s²","[Rn] 6d¹ 7s²","[Rn] 6d² 7s²","[Rn] 5f² 6d¹ 7s²","[Rn] 5f³ 6d¹ 7s²","[Rn] 5f⁴ 6d¹ 7s²","[Rn] 5f⁶ 7s²","[Rn] 5f⁷ 7s²","[Rn] 5f⁷ 6d¹ 7s²","[Rn] 5f⁹ 7s²","[Rn] 5f¹⁰ 7s²","[Rn] 5f¹¹ 7s²","[Rn] 5f¹² 7s²","[Rn] 5f¹³ 7s²","[Rn] 5f¹⁴ 7s²","[Rn] 5f¹⁴ 6d¹ 7s²","[Rn] 5f¹⁴ 6d² 7s²","[Rn] 5f¹⁴ 6d³ 7s²","[Rn] 5f¹⁴ 6d⁴ 7s²","[Rn] 5f¹⁴ 6d⁵ 7s²","[Rn] 5f¹⁴ 6d⁶ 7s²","[Rn] 5f¹⁴ 6d⁷ 7s²","[Rn] 5f¹⁴ 6d⁸ 7s²","[Rn] 5f¹⁴ 6d¹⁰ 7s¹","[Rn] 5f¹⁴ 6d¹⁰ 7s²","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p¹","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p²","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p³","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁴","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁵","[Rn] 5f¹⁴ 6d¹⁰ 7s² 7p⁶"];
        const weights = ["","1.008","4.0026","6.94","9.0122","10.81","12.011","14.007","15.999","18.998","20.180","22.990","24.305","26.982","28.085","30.974","32.06","35.45","39.948","39.098","40.078","44.956","47.867","50.942","51.996","54.938","55.845","58.933","58.693","63.546","65.38","69.723","72.63","74.922","78.96","79.904","83.798","85.468","87.62","88.906","91.224","92.906","95.95","(98)","101.07","102.91","106.42","107.87","112.41","114.82","118.71","121.76","127.60","126.90","131.29","132.91","137.33","138.91","140.12","140.91","144.24","(145)","150.36","151.96","157.25","158.93","162.50","164.93","167.26","168.93","173.05","174.97","178.49","180.95","183.84","186.21","190.23","192.22","195.08","196.97","200.59","204.38","207.2","208.98","(209)","(210)","(222)","(223)","(226)","(227)","232.04","231.04","238.03","(237)","(244)","(243)","(247)","(247)","(251)","(252)","(257)","(258)","(259)","(262)","(267)","(268)","(271)","(272)","(270)","(276)","(281)","(280)","(285)","(284)","(289)","(288)","(293)","(294)","(294)"];

        const wikiImageMap = {
            1: "Hydrogen_discharge_tube.jpg", 2: "Helium_discharge_tube.jpg", 3: "Lithium (Element - 3) 2.jpg", 4: "Beryllium nuggets 2.jpg", 5: "Boron (B).jpg",
            6: "Diamond-and-graphite-with-scale.jpg", 7: "Fluessiger Stickstoff.jpg", 8: "Liquid_oxygen_in_a_beaker_4.jpg", 9: "Liquid fluorine tighter crop.jpg", 10: "Neon_discharge_tube.jpg",
            11: "NNa (Sodium).jpg", 12: "Magnesium_crystals.jpg", 13: "Aluminium-4.jpg", 14: "SiliconCroda.jpg", 15: "Phosphor.JPG",
            16: "Sulfur-sample.jpg", 17: "Chlorine in bottle.jpg", 18: "Argon_discharge_tube.jpg", 19: "Potassium.jpg", 20: "Calcium_1.jpg",
            21: "Scandium, Sc.jpg", 22: "Titanium crystal-bars.jpg", 23: "Vanadium crystal bar and 1cm3 cube.jpg", 24: "Chromium_crystals_and_1cm3_cube.jpg", 25: "Manganese_electrolytic_and_1cm3_cube.jpg",
            26: "Iron_electrolytic_and_1cm3_cube.jpg", 27: "Kobalt electrolytic and 1cm3 cube.jpg", 28: "Nickel electrolytic and 1cm3 cube.jpg", 29: "Continuously Transposed Conductor Cu (Copper CTC) 3.jpg", 30: "Zinc_fragment_sublimed_and_1cm3_cube.jpg",
            31: "Gallium crystals.jpg", 32: "Germanium_polycrystalline-2.jpg", 33: "Arsenic_1.jpg", 34: "Selenium_black.jpg", 35: "Bromine_vial_in_acrylic_cube.jpg",
            36: "Krypton_discharge_tube.jpg", 37: "Rubidium_metal.jpg", 38: "Strontium_destilled_crystals.jpg", 39: "Yttrium_sublimed_dendritic_and_1cm3_cube.jpg", 40: "Zirconium_crystal_bar_and_1cm3_cube.jpg",
            41: "Niobium_crystals_and_1cm3_cube.jpg", 42: "Molybdenum_crystalline_fragment_and_1cm3_cube.jpg", 43: "Technetium-sample-cropped.jpg", 44: "Ruthenium_pellet_and_1cm3_cube.jpg", 45: "Rhodium_powder_pressed_melted.jpg",
            46: "Palladium_1.jpg", 47: "Silver_crystal.jpg", 48: "Cadmium_crystal_bar.jpg", 49: "Indium_1.jpg", 50: "Beta-tin-sample.jpg",
            51: "Antimony-4.jpg", 52: "Tellurium_crystal.jpg", 53: "Iodine_sample.jpg", 54: "Xenon_discharge_tube.jpg", 55: "Cesium_metal.jpg",
            56: "Barium_under_argon_atmosphere_mostly_oxidized.jpg", 57: "Lanthanum-2.jpg", 58: "Cerium_2.jpg", 59: "Praseodymium.jpg", 60: "Neodymium_2.jpg",
            61: "Promethium-147-paint.jpg", 62: "Samarium-2.jpg", 63: "Europium.jpg", 64: "Gadolinium-2.jpg", 65: "Terbium-2.jpg",
            66: "Dysprosium-2.jpg", 67: "Holmium2.jpg", 68: "Erbium-2.jpg", 69: "Thulium-sublimed-dendritic-piece.jpg", 70: "Ytterbium-3.jpg",
            71: "Lutetium_sublimed_dendritic_and_1cm3_cube.jpg", 72: "Hafnium_single_crystal_bar_and_1cm3_cube.jpg", 73: "Tantalum_single_crystal_and_1cm3_cube.jpg", 74: "Tungsten_1.jpg", 75: "Rhenium_single_crystal_bar_and_1cm3_cube.jpg",
            76: "Osmium_crystals.jpg", 77: "Iridium-2.jpg", 78: "Platinum_crystals.jpg", 79: "Gold_nugget_3.jpg", 80: "Pouring_liquid_mercury_bionerd.jpg",
            81: "Thallium_pieces_in_ampoule.jpg", 82: "Lead_electrolytic_and_1cm3_cube.jpg", 83: "Bismuth_crystals_and_1cm3_cube.jpg", 84: "Polonium210.jpg", 85: "Astatine.jpg",
            86: "Radon_discharge_tube.jpg", 87: "Francium_outline.png", 88: "Radium226.jpg", 89: "Actinium_sample.jpg", 90: "Thorium_crystal.jpg",
            91: "Protactinium-231.jpg", 92: "Uranium238.jpg", 93: "Neptunium-237_oxide.jpg", 94: "Plutonium_ring.jpg", 95: "Americium_microscope.jpg",
            96: "Curium-244.jpg"
        };

        // 格式: [原子序, 狀態, 屬性, 放射性(Y/N), 熔點, 沸點, 反應簡述, 水反應, 氧化物性質, 應用]
        const rawData = [
            [1, "氣體", "自然", "N", "-259.1", "-252.9", "燃燒生成水，與非金屬反應", "不反應", "中性 (水)", "氨氣生產、石油脫硫、氫化反應、火箭燃料、燃料電池"],
            [2, "氣體", "自然", "N", "-272.2", "-268.9", "極不活潑", "不反應", "無", "低溫冷卻(MRI)、氣球充氣、焊接保護氣、深海潛水混合氣"],
            [3, "固體", "自然", "N", "180.5", "1342", "易氧化，燃燒呈紅色", "劇烈反應生成氫氣", "強鹼性", "鋰離子電池、陶瓷玻璃、潤滑脂、抗憂鬱藥"],
            [4, "固體", "自然", "N", "1287", "2469", "表面形成緻密氧化膜", "不反應(表面氧化膜保護)", "兩性", "X射線視窗、航太合金、核反應爐反射層"],
            [5, "固體", "自然", "N", "2076", "3927", "高溫下反應", "不反應", "弱酸性", "玻璃纖維、硼矽酸鹽玻璃、清潔劑(硼砂)、半導體摻雜"],
            [6, "固體", "自然", "N", "3550(鑽)", "4827", "可燃，還原性強", "不反應", "酸性 (CO2)", "鋼鐵冶煉、石墨電極、碳纖維、鑽石珠寶、活性碳過濾"],
            [7, "氣體", "自然", "N", "-210.0", "-195.8", "惰性，高溫下與少數金屬反應", "不反應", "酸性", "合成氨(肥料)、液氮冷卻、惰性保護氣、炸藥製造"],
            [8, "氣體", "自然", "N", "-218.8", "-183.0", "強氧化劑，助燃", "微溶", "多樣", "鋼鐵冶煉、醫療呼吸氣體、火箭氧化劑、乙烯氧化"],
            [9, "氣體", "自然", "N", "-219.7", "-188.1", "最強氧化劑，腐蝕性極強", "爆炸性反應", "OF2 (特殊)", "鈾濃縮(UF6)、鐵氟龍(PTFE)、含氟牙膏、冷凍空調冷媒"],
            [10, "氣體", "自然", "N", "-248.6", "-246.1", "極不活潑", "不反應", "無", "霓虹燈、高壓指示燈、氦氖雷射、低溫冷卻劑"],
            [11, "固體", "自然", "N", "97.8", "883", "易氧化，燃燒呈黃色", "劇烈反應 (爆炸)", "強鹼性", "食鹽、肥皂/洗滌劑、鈉燈、有機合成還原劑"],
            [12, "固體", "自然", "N", "650", "1090", "燃燒發出耀眼白光", "熱水反應", "鹼性", "鋁鎂合金、汽車零件、煙火閃光粉、去硫劑"],
            [13, "固體", "自然", "N", "660.3", "2467", "兩性金屬，易氧化", "不反應(保護膜)", "兩性", "交通工具、建築門窗、包裝鋁箔、高壓電纜"],
            [14, "固體", "自然", "N", "1414", "3265", "半導體，高溫與氧反應", "不反應", "弱酸性", "半導體晶片、太陽能電池、玻璃/陶瓷、矽利康"],
            [15, "固體", "自然", "N", "44.2(白)", "280", "白磷自燃，紅磷穩定", "不反應", "酸性", "化肥、火柴、殺蟲劑、金屬表面處理"],
            [16, "固體", "自然", "N", "115.2", "444.6", "可燃，與金屬反應", "不反應", "酸性", "硫酸製造、橡膠硫化、火藥、農藥殺菌"],
            [17, "氣體", "自然", "N", "-101.5", "-34.0", "強氧化劑，有毒", "歧化反應 (生成酸)", "酸性", "水處理消毒、PVC塑膠、漂白劑、鹽酸製造"],
            [18, "氣體", "自然", "N", "-189.4", "-185.8", "極不活潑", "不反應", "無", "焊接保護氣、白熾燈填充、鈦金屬精煉、雙層玻璃絕熱"],
            [19, "固體", "自然", "N", "63.5", "759", "極易氧化，燃燒呈紫色", "劇烈爆炸", "強鹼性", "鉀肥、玻璃肥皂、液體洗滌劑、低鈉鹽"],
            [20, "固體", "自然", "N", "842", "1484", "易氧化，燃燒呈磚紅色", "反應生成氫氣", "鹼性", "煉鋼脫氧、水泥/混凝土、石膏、減少金屬還原劑"],
            [21, "固體", "自然", "N", "1541", "2836", "易溶於酸", "反應生成氫氣", "鹼性", "鋁鈧合金、金屬鹵化物燈、雷射晶體"],
            [22, "固體", "自然", "N", "1668", "3287", "抗腐蝕，高溫氧化", "不反應", "兩性/弱酸", "航空合金、人工關節、白色顏料(TiO2)、光觸媒"],
            [23, "固體", "自然", "N", "1910", "3407", "耐腐蝕", "不反應", "兩性", "高強度鋼合金、硫酸觸媒、釩液流電池"],
            [24, "固體", "自然", "N", "1907", "2671", "鈍化，耐酸", "不反應", "酸性 (CrO3)", "不鏽鋼、鍍鉻裝飾、顏料、皮革鞣製"],
            [25, "固體", "自然", "N", "1246", "2061", "活潑金屬", "分解水 (熱)", "酸性/鹼性 (多價)", "鋼鐵脫硫/硬化、鋁合金罐、乾電池"],
            [26, "固體", "自然", "N", "1538", "2861", "潮濕易鏽蝕", "高溫水蒸氣反應", "鹼性/兩性", "建築結構、機械製造、汽車船艦、工具"],
            [27, "固體", "自然", "N", "1495", "2927", "穩定，類似鐵鎳", "不反應", "鹼性", "鋰電池正極、超級合金、藍色顏料、磁鐵"],
            [28, "固體", "自然", "N", "1455", "2730", "抗腐蝕", "不反應", "鹼性", "不鏽鋼、充電電池、硬幣、電鍍"],
            [29, "固體", "自然", "N", "1085", "2562", "穩定，受熱氧化", "不反應", "鹼性", "電線電纜、電子電路、水管、青銅/黃銅合金"],
            [30, "固體", "自然", "N", "419.5", "907", "兩性金屬", "不反應", "兩性", "鍍鋅防鏽、黃銅合金、壓鑄件、電池陽極"],
            [31, "固體", "自然", "N", "29.8", "2204", "液態範圍廣", "不反應", "兩性", "LED(氮化鎵)、半導體、高溫溫度計"],
            [32, "固體", "自然", "N", "938.3", "2833", "半導體性質", "不反應", "兩性", "光纖、紅外線光學、太陽能電池、早期電晶體"],
            [33, "固體", "自然", "N", "817(昇華)", "614", "有毒，易氧化", "不反應", "酸性", "砷化鎵半導體、木材防腐、殺蟲劑、合金硬化"],
            [34, "固體", "自然", "N", "221", "685", "光導電性", "不反應", "酸性", "影印機鼓、玻璃脫色、太陽能電池、洗髮精"],
            [35, "液體", "自然", "N", "-7.2", "58.8", "揮發性強，有毒", "歧化反應", "酸性", "阻燃劑、農藥、攝影底片、油井鑽探"],
            [36, "氣體", "自然", "N", "-157.4", "-153.2", "惰性，可與氟反應", "不反應", "無", "絕熱窗、高強度閃光燈、雷射"],
            [37, "固體", "自然", "Y(微)", "39.3", "688", "極活潑，自燃", "劇烈爆炸", "強鹼性", "原子鐘、光電池、熱電產生器"],
            [38, "固體", "自然", "N", "777", "1382", "易氧化，燃燒呈深紅", "劇烈反應", "強鹼性", "紅色煙火、鐵氧體磁鐵、發光塗料"],
            [39, "固體", "自然", "N", "1522", "3345", "稀土性質", "熱水反應", "鹼性", "紅色螢光粉(LED/CRT)、高溫超導體、雷射晶體"],
            [40, "固體", "自然", "N", "1855", "4409", "極抗腐蝕", "不反應", "兩性", "核反應爐包殼、陶瓷刀、人造鑽石"],
            [41, "固體", "自然", "N", "2477", "4744", "抗酸", "不反應", "兩性", "超導磁體、鋼管合金、超級合金"],
            [42, "固體", "自然", "N", "2623", "4639", "高熔點，耐熱", "不反應", "酸性", "高強度鋼、潤滑劑、石油催化劑"],
            [43, "固體", "人造", "Y", "2157", "4265", "放射性，首個人造元素", "不反應", "酸性", "醫學影像診斷(骨骼掃描)、β射線源"],
            [44, "固體", "自然", "N", "2334", "4150", "極穩定", "不反應", "揮發性氧化物", "電子觸點、晶片電阻、化工催化劑"],
            [45, "固體", "自然", "N", "1964", "3695", "極穩定，催化劑", "不反應", "兩性", "汽車觸媒轉換器、高品質鏡面、珠寶鍍層"],
            [46, "固體", "自然", "N", "1555", "2963", "吸氫能力強", "不反應", "鹼性", "汽車觸媒轉換器、氫氣純化、電子電容器"],
            [47, "固體", "自然", "N", "961.8", "2162", "導電最佳，易硫化", "不反應", "鹼性", "珠寶銀器、電子導體、太陽能板漿料、抗菌劑"],
            [48, "固體", "自然", "N", "321.1", "767", "有毒，易熔", "不反應", "鹼性", "鎳鎘電池、顏料、塗層、太陽能電池"],
            [49, "固體", "自然", "Y(微)", "156.6", "2072", "軟金屬", "不反應", "兩性", "LCD螢幕(ITO)、低熔點合金、半導體"],
            [50, "固體", "自然", "N", "231.9", "2602", "低溫錫疫，兩性", "不反應", "兩性", "焊錫、鍍錫罐頭、浮法玻璃、青銅"],
            [51, "固體", "自然", "N", "630.6", "1587", "類金屬", "不反應", "兩性/酸性", "鉛酸電池極板、阻燃劑、微電子"],
            [52, "固體", "自然", "N", "449.5", "988", "半導體", "不反應", "兩性/酸性", "太陽能電池(CdTe)、熱電裝置、合金添加"],
            [53, "固體", "自然", "N", "113.7", "184.3", "昇華紫色蒸氣", "微溶", "酸性", "消毒藥水、顯影劑、甲狀腺治療、食鹽添加"],
            [54, "氣體", "自然", "N", "-111.7", "-108.1", "可形成化合物(氟/氧)", "不反應", "酸性 (XeO3)", "離子推進器、麻醉劑、閃光燈、暗物質探測"],
            [55, "固體", "自然", "N", "28.4", "671", "最活潑金屬(除Fr)", "劇烈爆炸", "強鹼性", "原子鐘(秒定義)、鑽井液、光電管"],
            [56, "固體", "自然", "N", "727", "1897", "易氧化，綠色火焰", "劇烈反應", "強鹼性", "鑽井泥漿、鋇餐造影、煙火綠光"],
            [57, "固體", "自然", "N", "920", "3464", "稀土，活潑", "緩慢反應", "鹼性", "混合動力電池、相機鏡頭、石油裂解催化"],
            [58, "固體", "自然", "N", "795", "3443", "稀土，易氧化", "熱水反應", "鹼性", "玻璃拋光、汽車觸媒、打火石、LED螢光粉"],
            [59, "固體", "自然", "N", "935", "3520", "綠色鹽類", "熱水反應", "鹼性", "飛機引擎合金、強力磁鐵、黃色玻璃"],
            [60, "固體", "自然", "N", "1024", "3074", "強力磁鐵", "熱水反應", "鹼性", "強力磁鐵(硬碟/馬達)、雷射、玻璃著色"],
            [61, "固體", "人造", "Y", "1042", "3000", "放射性稀土", "反應生成氫", "鹼性", "核電池、夜光塗料、厚度計"],
            [62, "固體", "自然", "Y(微)", "1072", "1794", "中子吸收劑", "反應生成氫", "鹼性", "釤鈷磁鐵、核反應爐控制、癌症藥物"],
            [63, "固體", "自然", "N", "822", "1529", "螢光粉", "反應生成氫", "鹼性", "紅色螢光粉(電視/LED)、防偽標籤"],
            [64, "固體", "自然", "N", "1312", "3273", "磁熱效應", "不反應", "鹼性", "MRI顯影劑、中子吸收、磁致冷"],
            [65, "固體", "自然", "N", "1356", "3230", "綠色螢光", "不反應", "鹼性", "綠色螢光粉、磁致伸縮裝置(聲納)"],
            [66, "固體", "自然", "N", "1407", "2567", "高磁性", "不反應", "鹼性", "釹磁鐵耐熱添加、核反應爐控制桿"],
            [67, "固體", "自然", "N", "1461", "2720", "高磁矩", "不反應", "鹼性", "雷射外科、校正磁場、黃色玻璃"],
            [68, "固體", "自然", "N", "1529", "2868", "光纖摻雜", "不反應", "鹼性", "光纖放大器、雷射醫美、玻璃著色"],
            [69, "固體", "自然", "N", "1545", "1950", "X射線源", "不反應", "鹼性", "手提X光機、雷射、歐元防偽"],
            [70, "固體", "自然", "N", "824", "1196", "化學性質近似鈣", "緩慢反應", "鹼性", "光纖放大器、不鏽鋼添加、應力計"],
            [71, "固體", "自然", "N", "1663", "3402", "最硬稀土", "不反應", "鹼性", "PET掃描偵測器、石油裂解、LED"],
            [72, "固體", "自然", "N", "2233", "4603", "核反應爐控制棒", "不反應", "兩性", "核反應爐控制棒、電漿切割電極、積體電路絕緣層"],
            [73, "固體", "自然", "N", "3017", "5458", "生物相容性高", "不反應", "酸性/兩性", "電容器(手機/筆電)、人工骨骼、化工抗腐蝕"],
            [74, "固體", "自然", "N", "3422", "5555", "最高熔點金屬", "不反應", "酸性", "燈泡鎢絲、硬質合金刀具、穿甲彈、高溫爐"],
            [75, "固體", "自然", "N", "3186", "5596", "高溫合金", "不反應", "酸性", "噴射引擎葉片、石油重整催化、熱電偶"],
            [76, "固體", "自然", "N", "3033", "5012", "密度最高", "不反應", "揮發性毒性氧化物", "鋼筆筆尖、電觸點、指紋顯影"],
            [77, "固體", "自然", "N", "2446", "4428", "最抗腐蝕", "不反應", "鹼性", "火星塞、坩堝、標準公斤原器、抗癌藥"],
            [78, "固體", "自然", "N", "1768", "3825", "催化劑，惰性", "不反應", "鹼性", "汽車觸媒、珠寶、化療藥物、實驗室器皿"],
            [79, "固體", "自然", "N", "1064", "2970", "最延展，惰性", "不反應", "不溶", "珠寶儲備、電子接點、牙科、奈米醫學"],
            [80, "液體", "自然", "N", "-38.8", "356.7", "唯一液態金屬，有毒", "不反應", "弱鹼性", "溫度計、螢光燈、牙科補牙(汞齊)、電解氯"],
            [81, "固體", "自然", "N", "304", "1473", "劇毒", "緩慢反應", "強鹼性(TlOH)", "紅外線光學、铊心掃描、超導體"],
            [82, "固體", "自然", "N", "327.5", "1749", "重金屬，輻射屏蔽", "不反應", "兩性", "鉛酸電池、輻射屏蔽、子彈、電纜護套"],
            [83, "固體", "自然", "Y(極微)", "271.4", "1564", "抗磁性最強", "不反應", "弱酸性", "胃藥、化妝品、低熔點合金、消防灑水頭"],
            [84, "固體", "自然", "Y", "254", "962", "強放射性，熱源", "反應", "兩性", "抗靜電刷、熱源(RTG)、中子源"],
            [85, "固體", "自然", "Y", "302", "337", "極稀有鹵素", "未知", "酸性(推測)", "標靶α粒子癌症治療(研究中)"],
            [86, "氣體", "自然", "Y", "-71", "-61.7", "放射性氣體，致癌", "不反應", "無", "癌症放射治療(早期)、地震預測(研究)"],
            [87, "固體", "自然", "Y", "27", "677", "極不穩定，最活潑?", "劇烈爆炸(推測)", "強鹼性", "基礎原子結構研究(無商業應用)"],
            [88, "固體", "自然", "Y", "700", "1737", "強放射性，發光", "劇烈反應", "強鹼性", "早期夜光塗料、癌症放射治療"],
            [89, "固體", "自然", "Y", "1050", "3198", "強放射性", "反應生成氫", "鹼性", "癌症免疫療法(Ac-225)"],
            [90, "固體", "自然", "Y", "1750", "4788", "核燃料潛力", "緩慢反應", "鹼性", "氣燈紗罩、鎂合金、潛在核燃料、TIG焊條"],
            [91, "固體", "自然", "Y", "1568", "4027", "稀有放射性", "反應", "鹼性", "基礎科學研究"],
            [92, "固體", "自然", "Y", "1132", "4131", "主要核燃料", "緩慢反應", "兩性", "核能發電、核武器、貧鈾穿甲彈"],
            [93, "固體", "人造", "Y", "644", "3902", "核反應堆副產物", "反應", "兩性", "中子探測儀、生產Pu-238的前驅物"],
            [94, "固體", "人造", "Y", "640", "3228", "核武原料", "反應", "兩性", "核武器、太空探測器電源(RTG)"],
            [95, "固體", "人造", "Y", "1176", "2011", "煙霧偵測器", "反應", "鹼性", "煙霧偵測器、中子源、厚度計"],
            [96, "固體", "人造", "Y", "1340", "3110", "太空電源", "反應", "鹼性", "α粒子X射線光譜儀(火星探測)、熱源"],
            [97, "固體", "人造", "Y", "986", "2627", "合成元素", "-", "鹼性", "合成鉲-252的靶材"],
            [98, "固體", "人造", "Y", "900", "1470", "強中子源", "-", "鹼性", "攜帶式中子源(油井/安檢/啟動反應爐)"],
            [99, "固體", "人造", "Y", "860", "-", "合成元素", "-", "-", "基礎科學研究(合成更重元素)"],
            [100, "固體", "人造", "Y", "1527", "-", "合成元素", "-", "-", "基礎科學研究"],
            [101, "固體", "人造", "Y", "827", "-", "合成元素", "-", "-", "基礎科學研究"],
            [102, "固體", "人造", "Y", "827", "-", "合成元素", "-", "-", "基礎科學研究"],
            [103, "固體", "人造", "Y", "1627", "-", "合成元素", "-", "-", "基礎科學研究"],
            [104, "固體", "人造", "Y", "2100?", "5500?", "超重元素，半衰期短", "-", "-", "基礎核物理與化學研究"],
            [105, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [106, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [107, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [108, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [109, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [110, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [111, "固體", "人造", "Y", "-", "-", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [112, "固體/氣?", "人造", "Y", "10?", "67?", "具揮發性金屬特性?", "-", "-", "基礎核物理與化學研究"],
            [113, "固體", "人造", "Y", "430?", "1130?", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [114, "固體/氣?", "人造", "Y", "70?", "150?", "可能為氣體金屬?", "-", "-", "基礎核物理與化學研究"],
            [115, "固體", "人造", "Y", "400?", "1100?", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [116, "固體", "人造", "Y", "360-510?", "760-880?", "超重元素", "-", "-", "基礎核物理與化學研究"],
            [117, "固體", "人造", "Y", "350-550?", "610?", "鹵素特性不明", "-", "-", "基礎核物理與化學研究"],
            [118, "氣體/固?", "人造", "Y", "-?", "80?", "可能為固體惰性氣體", "-", "-", "基礎核物理與化學研究"]
        ];

        // 將 Raw Data 轉換為詳細物件
        const detailedData = {};
        rawData.forEach(d => {
            detailedData[d[0]] = {
                state: d[1],
                nature: d[2],
                radio: d[3] === "Y" ? "是" : (d[3] === "N" ? "否" : d[3]),
                mp: d[4] === "-" ? "未知" : (d[4].includes("?") ? d[4] : d[4] + "°C"),
                bp: d[5] === "-" ? "未知" : (d[5].includes("?") ? d[5] : d[5] + "°C"),
                rxn: d[6],
                water: d[7],
                oxide: d[8],
                apps: d[9] || "基礎科學研究" // 防止無資料時的預設值
            };
        });

        function generateProperties(n, cat) {
            // 如果有詳細數據，直接返回
            if (detailedData[n]) return detailedData[n];

            // 備用推算邏輯 (防止索引錯誤)
            let props = {
                state: "未知", nature: "未知", radio: "未知", mp: "-", bp: "-",
                rxn: "資料待補", water: "資料待補", oxide: "資料待補",
                apps: "基礎科學研究"
            };
            return props;
        }

        function initTable() {
            const mainTable = document.getElementById('main-table');
            const fTable = document.getElementById('f-block-table');
            
            const elements = [];
            for(let i=1; i<=118; i++) {
                let cat = "transition-metal";
                if ([1,6,7,8,15,16,34].includes(i)) cat="nonmetal";
                if ([2,10,18,36,54,86,118].includes(i)) cat="noble-gas";
                if ([3,11,19,37,55,87].includes(i)) cat="alkali-metal";
                if ([4,12,20,38,56,88].includes(i)) cat="alkaline-earth";
                if ([5,14,32,33,51,52,85].includes(i)) cat="metalloid";
                if ([9,17,35,53,117].includes(i)) cat="halogen";
                if ([13,31,49,50,81,82,83,84,113,114,115,116].includes(i)) cat="post-transition";
                if (i >= 57 && i <= 71) cat="lanthanide";
                if (i >= 89 && i <= 103) cat="actinide";

                let imgName = wikiImageMap[i] || `${symbols[i]}_element.jpg`;
                const props = generateProperties(i, cat);

                elements.push({
                    n: i,
                    s: symbols[i],
                    zh: namesZh[i],
                    en: symbols[i], 
                    w: weights[i],
                    cat: cat,
                    conf: configs[i],
                    img: imgName,
                    ...props,
                    // apps 已經包含在 ...props 中
                });
            }

            const renderCell = (el, container) => {
                const cell = document.createElement('div');
                cell.className = `element-card ${el.cat}`;
                cell.innerHTML = `
                    <span class="absolute top-1 left-2 opacity-50 text-[10px] font-mono">${el.n}</span>
                    <span class="text-xl font-bold mt-1">${el.s}</span>
                    <span class="text-[10px] font-medium opacity-90">${el.zh}</span>
                `;
                cell.onclick = () => showElement(el);
                container.appendChild(cell);
            };

            for (let r = 1; r <= 7; r++) {
                for (let c = 1; c <= 18; c++) {
                    let n = null;
                    if(r==1 && c==1) n=1;
                    else if(r==1 && c==18) n=2;
                    else if(r==2 && c<=2) n=2+c;
                    else if(r==2 && c>=13) n=4+c-12; 
                    else if(r==3 && c<=2) n=10+c;
                    else if(r==3 && c>=13) n=12+c-12; 
                    else if(r==4) n=18+c;
                    else if(r==5) n=36+c;
                    else if(r==6) { if(c<=2) n=54+c; else if(c>=4) n=71+c-3; } 
                    else if(r==7) { if(c<=2) n=86+c; else if(c>=4) n=103+c-3; } 

                    const cell = document.createElement('div');
                    
                    if (n) {
                        const el = elements[n-1];
                        cell.className = `element-card ${el.cat}`;
                        cell.innerHTML = `
                            <span class="absolute top-1 left-2 opacity-50 text-[10px] font-mono">${el.n}</span>
                            <span class="text-xl font-bold mt-1">${el.s}</span>
                            <span class="text-[10px] font-medium opacity-90">${el.zh}</span>
                        `;
                        cell.onclick = () => showElement(el);
                    } else {
                        if(r==6 && c==3) {
                            cell.className = "element-card lanthanide opacity-30 cursor-default hover:transform-none hover:shadow-none";
                            cell.innerHTML = "<span class='text-[9px]'>57-71</span>";
                        } else if(r==7 && c==3) {
                            cell.className = "element-card actinide opacity-30 cursor-default hover:transform-none hover:shadow-none";
                            cell.innerHTML = "<span class='text-[9px]'>89-103</span>";
                        } else {
                            cell.style.visibility = "hidden";
                        }
                    }
                    mainTable.appendChild(cell);
                }
            }

            const fElements = elements.filter(e => (e.n>=57 && e.n<=71) || (e.n>=89 && e.n<=103));
            fElements.forEach(el => renderCell(el, fTable));
        }

        function showElement(el) {
            document.getElementById('m-number').innerText = el.n;
            document.getElementById('m-weight').innerText = el.w;
            document.getElementById('m-symbol').innerText = el.s;
            document.getElementById('m-name-zh').innerText = el.zh;
            document.getElementById('m-name-en').innerText = el.en || el.s; 
            document.getElementById('m-electron').innerText = el.conf;
            
            const imgEl = document.getElementById('m-image');
            imgEl.src = `https://commons.wikimedia.org/wiki/Special:FilePath/${el.img}?width=800`;
            imgEl.onerror = function() { this.src = `https://placehold.co/800x400/1e293b/white?text=${el.s}`; };

            const wikiUrl = `https://zh.wikipedia.org/wiki/${el.zh}`;
            document.getElementById('m-wiki-link').href = wikiUrl;

            document.getElementById('m-phys-state').innerText = el.state;
            document.getElementById('m-phys-nature').innerText = `${el.nature} ${el.radio.includes("是") ? "(放射性)" : ""}`;
            document.getElementById('m-phys-mp').innerText = el.mp;
            document.getElementById('m-phys-bp').innerText = el.bp;

            document.getElementById('m-chem-reaction').innerText = el.rxn;
            document.getElementById('m-chem-water').innerText = el.water;
            document.getElementById('m-chem-oxide').innerText = el.oxide;

            document.getElementById('m-apps').innerText = el.apps;
            
            const side = document.getElementById('modal-side');
            side.className = `w-full md:w-2/5 p-8 flex flex-col relative text-white transition-colors duration-500 ${el.cat}`;

            const modal = document.getElementById('modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.remove('opacity-0'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }

        window.onload = initTable;
    </script>
</body>
</html>
